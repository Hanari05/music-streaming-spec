<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>🌸 Pastel Music Demo</title>
<style>
:root {
  --pink: #fcdce1;
  --white: #fff;
  --lav: #f6ecf7;
  --mint: #e7f5f2;
  --text: #444;
}

body {
  font-family: "Poppins", sans-serif;
  margin: 0;
  background: var(--lav);
  color: var(--text);
}

header {
  background: var(--pink);
  padding: 1em;
  text-align: center;
  font-weight: 600;
  font-size: 1.4em;
  color: #444;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

nav {
  display: flex;
  justify-content: center;
  background: var(--white);
  gap: 1em;
  padding: 0.8em;
  flex-wrap: wrap;
}

nav button {
  border: none;
  background: var(--mint);
  padding: 0.6em 1.2em;
  border-radius: 1em;
  cursor: pointer;
  transition: 0.2s;
}

nav button:hover {
  background: var(--pink);
}

main {
  padding: 1.2em;
  max-width: 900px;
  margin: auto;
}

.hidden {
  display: none;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
  gap: 1em;
}

.card {
  background: var(--white);
  border-radius: 1em;
  padding: 1em;
  text-align: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  transition: 0.2s;
  cursor: pointer;
}
.card:hover {
  background: var(--pink);
}

#player {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--white);
  padding: 0.8em;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
}

#player-info {
  flex: 1;
  padding-left: 1em;
}

#player button {
  background: none;
  border: none;
  font-size: 1.3em;
  cursor: pointer;
  margin: 0 0.3em;
}

/* Playlist detail styling */
#playlist-detail {
  background: var(--lav);
  padding: 1em;
  border-radius: 1em;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-top: 1em;
}

.track-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.track-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--white);
  border-radius: 0.8em;
  padding: 0.7em 1em;
  margin-bottom: 0.5em;
  cursor: pointer;
  transition: 0.2s;
}

.track-list li:hover {
  background: var(--mint);
}

.add-btn {
  background: var(--pink);
  border: none;
  padding: 0.6em 1.2em;
  border-radius: 1em;
  cursor: pointer;
  margin-top: 1em;
}

.add-btn:hover {
  background: var(--mint);
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
}

.admin-table th, .admin-table td {
  padding: 0.6em;
  border-bottom: 1px solid #ccc;
  text-align: left;
}

.admin-table th {
  background: var(--mint);
}
</style>
</head>
<body>

<header>🌸 Pastel Music Demo</header>

<nav>
  <button onclick="showView('home')">Trang chủ</button>
  <button onclick="showView('tracks')">Tracks</button>
  <button onclick="showView('search')">Tìm kiếm</button>
  <button onclick="showView('playlists')">Playlists</button>
  <button onclick="showView('artists')">Nghệ sĩ</button>
  <button onclick="showView('history')">Lịch sử</button>
  <button onclick="showView('admin')">Admin</button>
</nav>

<main>
  <!-- Trang chủ -->
  <section id="home" class="view">
    <h2>🌷 Khám phá Pastel Music</h2>
    <p>🎵 Chào mừng bạn đến với <b>Pastel Music</b> — nơi để chill cùng những bản nhạc nhẹ nhàng, pastel và dễ thương.  
    Hãy bắt đầu bằng cách lướt qua <b>Tracks</b> hoặc khám phá nghệ sĩ bạn yêu thích nhé!</p>
  </section>

  <!-- Tracks -->
  <section id="tracks" class="view hidden">
    <h2>🎧 Danh sách bài hát</h2>
    <div id="track-list" class="grid"></div>
  </section>

  <!-- Search -->
  <section id="search" class="view hidden">
    <h2>​🎈 Tìm kiếm bài hát</h2>
    <input id="searchInput" type="text" placeholder="Nhập tên bài hát..." style="padding:0.5em;width:100%;border-radius:1em;border:none;">
    <div id="searchResult" class="grid" style="margin-top:1em;"></div>
  </section>

  <!-- Playlists -->
  <section id="playlists" class="view hidden">
    <h2>🎼 Playlists</h2>
    <div id="playlist-list" class="grid"></div>

    <div id="playlist-detail" class="hidden">
      <h3 id="playlist-title"></h3>
      <ul id="playlist-tracks" class="track-list"></ul>
    </div>

    <button class="add-btn" onclick="addPlaylist()">+ Tạo Playlist Mới</button>
  </section>

  <!-- Artists -->
  <section id="artists" class="view hidden">
    <h2>🎙 Nghệ sĩ nổi bật</h2>
    <div id="artist-list" class="grid"></div>

    <div id="albums-section" style="margin-top:2em;">
      <h3>📓 Albums</h3>
      <div id="album-list" class="grid"></div>
    </div>
  </section>

  <!-- History -->
  <section id="history" class="view hidden">
    <h2>📼 Lịch sử nghe</h2>
    <ul id="history-list"></ul>
  </section>

  <!-- Admin -->
  <section id="admin" class="view hidden">
    <h2>🎛️ Khu vực Admin (CRUD nội dung)</h2>
    <p>Quản lý danh sách bài hát trong hệ thống (tạm lưu cục bộ).</p>
    <table class="admin-table">
      <thead>
        <tr><th>ID</th><th>Tên bài hát</th><th>Nghệ sĩ</th><th>Thao tác</th></tr>
      </thead>
      <tbody id="admin-track-body"></tbody>
    </table>
    <button class="add-btn" onclick="addTrack()">+ Thêm bài hát</button>
  </section>
</main>

<footer id="player">
  <audio id="audio" controls style="width:100%;"></audio>
</footer>

<script>
const seed = {
  artists: [
    { id:1, name:"BLACKPINK" }, { id:2, name:"IU" },
    { id:3, name:"YOASOBI" }, { id:4, name:"Taylor Swift" }
  ],
  albums: [
    { id:1, name:"BORN PINK", artist:"BLACKPINK" },
    { id:2, name:"Love Poem", artist:"IU" },
    { id:3, name:"THE BOOK", artist:"YOASOBI" }
  ],
  tracks: [
    { id:1, title:"Pink Venom", artist:"BLACKPINK", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},
    { id:2, title:"Lovesick Girls", artist:"BLACKPINK", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},
    { id:3, title:"Love Poem", artist:"IU", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"},
    { id:4, title:"Yoru ni Kakeru", artist:"YOASOBI", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"},
    { id:5, title:"Lover", artist:"Taylor Swift", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"}
  ],
  playlists: [
    { id:1, name:"Chill Hits", tracks:[1,3,5] },
    { id:2, name:"BLACKPINK Collection", tracks:[1,2] }
  ],
  history: []
};

function showView(id){
  document.querySelectorAll('.view').forEach(v=>v.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  if(id==='playlists') renderPlaylists();
  if(id==='artists') { renderArtists(); renderAlbums(); }
  if(id==='tracks') renderTracks();
  if(id==='history') renderHistory();
  if(id==='admin') renderAdminTracks();
}

function renderTracks(){
  const container=document.getElementById("track-list");
  container.innerHTML="";
  seed.tracks.forEach(t=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=`${t.title} - ${t.artist}`;
    div.onclick=()=>playById(t.id);
    container.appendChild(div);
  });
}

function renderArtists(){
  const list=document.getElementById("artist-list");
  list.innerHTML="";
  seed.artists.forEach(a=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=a.name;
    list.appendChild(div);
  });
}

function renderAlbums(){
  const list=document.getElementById("album-list");
  list.innerHTML="";
  seed.albums.forEach(al=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=`${al.name} - ${al.artist}`;
    list.appendChild(div);
  });
}

function renderPlaylists(){
  const container=document.getElementById("playlist-list");
  container.innerHTML="";
  seed.playlists.forEach(pl=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`<h3>${pl.name}</h3><p>${pl.tracks.length} bài hát</p>`;
    div.onclick=()=>showPlaylistDetail(pl.id);
    container.appendChild(div);
  });
}

function showPlaylistDetail(id){
  const playlist=seed.playlists.find(p=>p.id===id);
  if(!playlist) return;
  document.getElementById("playlist-title").textContent=playlist.name;
  const list=document.getElementById("playlist-tracks");
  list.innerHTML="";
  playlist.tracks.forEach(tid=>{
    const t=seed.tracks.find(tr=>tr.id===tid);
    if(t){
      const li=document.createElement("li");
      li.innerHTML=`<span>${t.title} - <em>${t.artist}</em></span><button>▶️</button>`;
      li.onclick=()=>playById(t.id);
      li.querySelector("button").onclick=e=>{e.stopPropagation();playById(t.id);};
      list.appendChild(li);
    }
  });
  document.getElementById("playlist-detail").classList.remove("hidden");
}

function renderHistory(){
  const list=document.getElementById("history-list");
  list.innerHTML="";
  seed.history.forEach(h=>{
    const li=document.createElement("li");
    li.textContent=h;
    list.appendChild(li);
  });
}

function playById(id){
  const track=seed.tracks.find(t=>t.id===id);
  if(track){
    const audio=document.getElementById("audio");
    audio.src=track.url;
    audio.play();
    seed.history.unshift(`${track.title} - ${track.artist}`);
    if(seed.history.length>10) seed.history.pop();
  }
}

function addPlaylist(){
  const name=prompt("Nhập tên playlist:");
  if(!name) return;
  const newId=Math.max(...seed.playlists.map(p=>p.id))+1;
  seed.playlists.push({id:newId,name,tracks:[]});
  renderPlaylists();
}

function doSearch(){
  const q=document.getElementById("searchInput").value.toLowerCase();
  const res=document.getElementById("searchResult");
  res.innerHTML="";
  seed.tracks.filter(t=>t.title.toLowerCase().includes(q)||t.artist.toLowerCase().includes(q))
  .forEach(t=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=`${t.title} - ${t.artist}`;
    div.onclick=()=>playById(t.id);
    res.appendChild(div);
  });
}
document.getElementById("searchInput").addEventListener("input",doSearch);

function renderAdminTracks(){
  const tbody=document.getElementById("admin-track-body");
  tbody.innerHTML="";
  seed.tracks.forEach(t=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${t.id}</td><td>${t.title}</td><td>${t.artist}</td>
    <td><button onclick="editTrack(${t.id})">✏️</button>
    <button onclick="deleteTrack(${t.id})">🗑️</button></td>`;
    tbody.appendChild(tr);
  });
}

function addTrack(){
  const title=prompt("Tên bài hát:");
  const artist=prompt("Nghệ sĩ:");
  if(!title||!artist) return;
  const newId=Math.max(...seed.tracks.map(t=>t.id))+1;
  seed.tracks.push({id:newId,title,artist,url:""});
  renderAdminTracks();
}

function editTrack(id){
  const t=seed.tracks.find(x=>x.id===id);
  if(!t) return;
  const newTitle=prompt("Tên bài hát mới:",t.title);
  const newArtist=prompt("Nghệ sĩ mới:",t.artist);
  if(newTitle&&newArtist){
    t.title=newTitle;
    t.artist=newArtist;
    renderAdminTracks();
  }
}

function deleteTrack(id){
  if(confirm("Xoá bài hát này?")){
    const idx=seed.tracks.findIndex(t=>t.id===id);
    if(idx>-1) seed.tracks.splice(idx,1);
    renderAdminTracks();
  }
}

function init(){ renderTracks(); }
window.onload=init;
</script>
</body>
</html>
